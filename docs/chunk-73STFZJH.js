import{a as O,b as B,c as w,d as D,g as A,h as T,i as j,j as p,l as V,m as q,o as G,p as L,q as R,r as z,s as H,t as U,u as $,v as J,w as K}from"./chunk-GU7MFVY7.js";import{a as X,b as Y,c as Z,d as tt,e as et,f as rt,g as it,h as ot,i as nt,j as at}from"./chunk-DW2VA44I.js";import{p as Q,q as W}from"./chunk-34DT3WY6.js";import{b as N}from"./chunk-QNNLMPU4.js";import{V as F,X as k,g as E,i as I,j as y}from"./chunk-3LQS3P2X.js";import"./chunk-AESYL7IM.js";import{Bc as x,Fb as C,Pb as o,Qb as v,Tb as S,Va as d,Wa as s,a as M,b as _,ka as b,lb as g,nb as m,wb as e,xb as t,yb as u}from"./chunk-GMJZZR3I.js";function dt(n,a){n&1&&(e(0,"mat-error"),o(1,"Nombre es requerido"),t())}function mt(n,a){n&1&&(e(0,"mat-error"),o(1,"M\xEDnimo 3 caracteres"),t())}function ct(n,a){n&1&&(e(0,"mat-error"),o(1,"Precio es requerido"),t())}function st(n,a){n&1&&(e(0,"mat-error"),o(1,"Precio debe ser mayor a 0"),t())}function ut(n,a){n&1&&u(0,"mat-progress-bar",16)}var Ot=(()=>{let a=class a{constructor(i,c,r,l,f){this.fb=i,this.route=c,this.router=r,this.productService=l,this.snackBarService=f,this._id=0,this.isCreationMode=!0,this.sending=!1,this.loading=!1,this.formProduct=this.fb.group({name:["",[p.required,p.minLength(3)]],description:[""],price:["",[p.required,p.min(1)]]})}ngOnInit(){this._id=Number(this.route.snapshot.paramMap.get("id")),this.isCreationMode=this._id===0,this.isCreationMode||this.getProductInformation()}onSubmit(){if(!this.formProduct.valid)return;this.sending=!0;let i=_(M({id:this.productId},this.formProduct.value),{createdAt:this.isCreationMode?new Date:this.product?.createdAt,updatedAt:new Date});this.isCreationMode?this.productService.addProduct(i).subscribe(()=>{this.sending=!1,this.snackBarService.showSnackBar("Producto agregado correctamente!","ok"),this.router.navigate(["/products"])}):this.productService.updateProduct(i).subscribe(()=>{this.formProduct.markAsPristine(),this.formProduct.markAsUntouched(),this.snackBarService.showSnackBar("Informaci\xF3n actualizada correctamente!","ok"),this.router.navigate(["/products",this._id,"detail"])})}getProductInformation(){this.loading=!0,this.productService.getProduct(this._id).subscribe(i=>{if(this.loading=!1,!i){this.snackBarService.showSnackBar("El Producto no existe!","error"),this.router.navigate(["/products"]);return}this.product=i,this.setProductFormData(i)})}setProductFormData(i){this.formProduct.controls.name.setValue(i.name),this.formProduct.controls.description.setValue(i.description),this.formProduct.controls.price.setValue(i.price)}get productId(){return this._id===0?Math.floor(Math.random()*1e4)+1:this._id}isDirty(){return this.formProduct.dirty}};a.\u0275fac=function(c){return new(c||a)(s(U),s(E),s(I),s(W),s(Q))},a.\u0275cmp=b({type:a,selectors:[["app-product-form"]],standalone:!0,features:[S],decls:38,vars:10,consts:[[1,"card-cs"],["appearance","raised",1,"content"],["id","formProduct",3,"ngSubmit","formGroup"],["fxLayout","column"],["appearance","outline"],["matInput","","formControlName","name","placeholder","Ej: producto 1"],[4,"ngIf"],["matInput","","formControlName","description"],["matInput","","formControlName","price","type","number","placeholder","0",3,"min"],["matTextPrefix",""],["matTextSuffix",""],[1,"actions"],["type","button","routerLink","/products","mat-raised-button","","color","warn",3,"disabled"],[2,"padding","10px"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"]],template:function(c,r){if(c&1&&(e(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),o(4),t(),e(5,"mat-card-subtitle"),o(6,"Realiza la creaci\xF3n o edici\xF3n de un producto."),t()(),e(7,"mat-card-content")(8,"form",2),C("ngSubmit",function(){return r.onSubmit()}),e(9,"div",3)(10,"mat-form-field",4)(11,"mat-label"),o(12,"Nombre"),t(),u(13,"input",5),g(14,dt,2,0,"mat-error",6)(15,mt,2,0,"mat-error",6),t(),e(16,"mat-form-field",4)(17,"mat-label"),o(18,"Descripci\xF3n"),t(),u(19,"textarea",7),t(),e(20,"mat-form-field",4)(21,"mat-label"),o(22,"Precio"),t(),u(23,"input",8),e(24,"span",9),o(25,"$\xA0"),t(),e(26,"span",10),o(27,".00"),t(),g(28,ct,2,0,"mat-error",6)(29,st,2,0,"mat-error",6),t(),e(30,"mat-card-actions",11)(31,"button",12),o(32,"Cancelar"),t(),u(33,"div",13),e(34,"button",14),o(35,"Guardar"),t()()()()(),e(36,"mat-card-footer"),g(37,ut,1,0,"mat-progress-bar",15),t()()()),c&2){let l,f,h,P;d(4),v(r.isCreationMode?"Nuevo Producto":"Editar Producto"),d(4),m("formGroup",r.formProduct),d(6),m("ngIf",(l=r.formProduct.get("name"))==null?null:l.hasError("required")),d(),m("ngIf",(f=r.formProduct.get("name"))==null?null:f.hasError("minlength")),d(8),m("min",1),d(5),m("ngIf",(h=r.formProduct.get("price"))==null?null:h.hasError("required")),d(),m("ngIf",(P=r.formProduct.get("price"))==null?null:P.hasError("min")),d(2),m("disabled",r.sending||r.loading),d(3),m("disabled",r.sending||r.loading),d(3),m("ngIf",r.sending||r.loading)}},dependencies:[x,$,G,j,L,V,q,H,R,z,ot,X,et,Z,it,rt,tt,Y,k,F,T,A,O,B,w,D,K,J,N,at,nt,y],styles:[".card-cs[_ngcontent-%COMP%]{margin-top:50px;border-radius:2px;display:flex;justify-content:center;align-items:center}.content[_ngcontent-%COMP%]{width:70%}#formProduct[_ngcontent-%COMP%]{padding:15px}#formProduct[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{padding-top:5px;width:100%;display:block}#formProduct[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{padding:0!important}button[_ngcontent-%COMP%]{flex:1}.w100[_ngcontent-%COMP%]{width:100%}mat-card-header[_ngcontent-%COMP%]{background:#3f51b5;padding:5px;color:#fff;text-align:center;justify-content:center}mat-card-subtitle[_ngcontent-%COMP%]{color:#ccc5c5}mat-card-content[_ngcontent-%COMP%]{padding:10px}mat-card[_ngcontent-%COMP%]{padding:0}"]});let n=a;return n})();export{Ot as ProductFormComponent};
